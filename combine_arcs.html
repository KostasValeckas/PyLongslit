<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Combinning arc frames &#8212; PyLongslit  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Identify arc lines" href="identify.html" />
    <link rel="prev" title="Dark current subtraction" href="dark_current.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="combinning-arc-frames">
<span id="combine-arcs"></span><h1>Combinning arc frames<a class="headerlink" href="#combinning-arc-frames" title="Link to this heading">¶</a></h1>
<section id="quickstart">
<h2>Quickstart<a class="headerlink" href="#quickstart" title="Link to this heading">¶</a></h2>
<p>The command for running the arc frame combination procedure is called by:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pylongslit_combine_arcs<span class="w"> </span>PATH_TO_CONFIG_FILE
</pre></div>
</div>
<p>The arc frames are (optionally) bias-subtracted and then simply summed together.
The output is a single arc frame <code class="docutils literal notranslate"><span class="pre">master_arc.fits</span></code>, which is saved in the output directory
specified in the configuration file. The frame is automatically rotated
and flipped so it is oriented with x being the spectral axis, with
the wavelength increasing from left to right - this is the default
orientation for the rest of the software, after the raw data has been
processed.</p>
</section>
<section id="quality-assesment">
<h2>Quality Assesment<a class="headerlink" href="#quality-assesment" title="Link to this heading">¶</a></h2>
<p>The arc combinning procedure will show the final master arc upon exiting. You can
press <code class="docutils literal notranslate"><span class="pre">h</span></code> to normalize the master arc to emphasize the contrast
between the arc lines and the background - however, this might exagerate the
very faint lines to be more visible than they actually are. The documentation for your instrument
should have a map of the expected arc lines and their wavelengths - you can use it
to check if the arc lines are visible and the expected range of the detector
is covered (a common error is if a lamp from one ion is forgotten to be
included in the input directory, meaning to a certain wavelength range is not being covered by the arc lines).
The example below is from the example data set GQ1218+0832 from GTC OSIRIS both before and after
normalization:</p>
<a class="reference internal image-reference" href="_images/master_arc_non_normalized.png"><img alt="_images/master_arc_non_normalized.png" class="align-center" src="_images/master_arc_non_normalized.png" style="width: 100%;" />
</a>
<a class="reference internal image-reference" href="_images/master_arc_normalized.png"><img alt="_images/master_arc_normalized.png" class="align-center" src="_images/master_arc_normalized.png" style="width: 100%;" />
</a>
<p>Inspecting the arc map from <a class="reference external" href="https://www.gtc.iac.es/instruments/osiris/media/R1000B.jpg">OSIRIS webpage</a> ,
it is a able to see that overall pattern of the arc-lines is as expected:</p>
<a class="reference internal image-reference" href="_images/R1000B_arc.jpg"><img alt="_images/R1000B_arc.jpg" class="align-center" src="_images/R1000B_arc.jpg" style="width: 100%;" />
</a>
</section>
<section id="parameter-options">
<h2>Parameter options<a class="headerlink" href="#parameter-options" title="Link to this heading">¶</a></h2>
<p>The relevant parameters for the arc combinning procedure are (with example values):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;arc&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;arc_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;/home/kostas/Documents/PyLongslit_dev/SDSS_J213510+2728/arcs&quot;</span>
<span class="p">},</span>

<span class="s2">&quot;combine_arcs&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;skip_bias&quot;</span><span class="p">:</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you set <code class="docutils literal notranslate"><span class="pre">&quot;skip_bias&quot;:</span> <span class="pre">true</span></code>, the bias subtraction will be skipped. This
is sometimes useful for instruments where the detector gain is different for
the regular calibration frames and the arc frames, since this can force the
noise in the arc frames to become negative - resulting in numerical issues.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">arc_dir</span></code> parameter specifies the directory where the raw arc frames are located.
No other type of frames should be present in this directory.</p>
</section>
<section id="for-users-new-to-data-reduction-short-introduction-to-arc-lamp-frames">
<h2>For users new to data reduction - short introduction to arc lamp frames<a class="headerlink" href="#for-users-new-to-data-reduction-short-introduction-to-arc-lamp-frames" title="Link to this heading">¶</a></h2>
<p>Arc lamp frames are used to wavelength calibrate the detector,
i.e. to assign a wavelength to each pixel in the detector. This procedure is
described in detail in the <a class="reference external" href="wavecalib">wavelength calibration section</a>. Every
raw arc lamp frame has a emission spectrum of one or several ions with known wavelengths.
In this step the arc frames are
combined to create a single master arc frame, so the wavelength calibration can be done
on a single frame, instead of on each individual arc frame.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">PyLongslit</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="getting_started.html">Getting started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#downloading-the-tutorial-data">Downloading the tutorial data</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="getting_started.html#tutorial">Tutorial</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="special_use_cases.html">Special Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="develop.html">Interested in developing?</a></li>
<li class="toctree-l1"><a class="reference internal" href="uncertainties.html">Note on how the software estimates uncertainties</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="getting_started.html">Getting started</a><ul>
      <li>Previous: <a href="dark_current.html" title="previous chapter">Dark current subtraction</a></li>
      <li>Next: <a href="identify.html" title="next chapter">Identify arc lines</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/combine_arcs.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>