<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Special Use Cases &#8212; PyLongslit  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Interested in developing?" href="develop.html" />
    <link rel="prev" title="Tested Instruments and Configurations" href="tested_instruments.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="special-use-cases">
<h1>Special Use Cases<a class="headerlink" href="#special-use-cases" title="Link to this heading">¶</a></h1>
<p>In this section, we provide special use-case examples to document and explore
the versatility of the PyLongslit software. All users are welcome to contribute
to this section by providing their own use-case examples, which will be added to the documentation
(see <a class="reference internal" href="develop.html#developer"><span class="std std-ref">developing guidelines</span></a> for more information on how to contribute).</p>
<section id="extracting-closely-spaced-spectra">
<h2>Extracting closely spaced spectra<a class="headerlink" href="#extracting-closely-spaced-spectra" title="Link to this heading">¶</a></h2>
<p>With a longslit instrument, it is possible to obtain distinct spectra of closely
spaced sources within the same object, such as lensed quasars. The spectra in such cases are placed so
closely that automatic modeling/fitting routines will sometimes fail. The software can deal with such cases, but a fair amount of manual work is required.
The following describes how to extract distinct 1d spectra of very closely spaced sources.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before you execute the following steps, make sure you have tried to use the software
on a more simple case, such as the <a class="reference internal" href="getting_started.html#tutorial-data"><span class="std std-ref">tutorial data</span></a>. You will
need a basic understanding of the routines in order to perform the following steps.</p>
</div>
<ol class="arabic">
<li><p><strong>Follow the regular</strong> <a class="reference internal" href="getting_started.html#tutorial"><span class="std std-ref">pipeline steps</span></a> <strong>up to</strong> <a class="reference internal" href="objtrace.html#objtrace"><span class="std std-ref">object tracing</span></a>.</p></li>
<li><dl>
<dt><strong>Create copies of the reduced files such that for every exposure, you have a copy corresponding to every spectrum you want to extract.</strong></dt><dd><p>For example, if you have 3 reduced exposures of the same object:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>├──<span class="w"> </span>output_directory
│<span class="w">   </span>├──<span class="w"> </span>reduced_science_exposure_1.fits
│<span class="w">   </span>├──<span class="w"> </span>reduced_science_exposure_2.fits
│<span class="w">   </span>├──<span class="w"> </span>reduced_science_exposure_3.fits
</pre></div>
</div>
<p>And within your object, you have two closely spaced spectra A and B:</p>
<a class="reference internal image-reference" href="_images/close_trace.png"><img alt="_images/close_trace.png" class="align-center" src="_images/close_trace.png" style="width: 100%;" />
</a>
<p>Then the copied filenames could look like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>├──<span class="w"> </span>output_directory
│<span class="w">   </span>├──<span class="w"> </span>reduced_science_exposure_1_A.fits
│<span class="w">   </span>├──<span class="w"> </span>reduced_science_exposure_1_B.fits
│<span class="w">   </span>├──<span class="w"> </span>reduced_science_exposure_2_A.fits
│<span class="w">   </span>├──<span class="w"> </span>reduced_science_exposure_2_B.fits
│<span class="w">   </span>├──<span class="w"> </span>reduced_science_exposure_3_A.fits
│<span class="w">   </span>├──<span class="w"> </span>reduced_science_exposure_3_B.fits
</pre></div>
</div>
<p><strong>Notice</strong> that the files without the <code class="docutils literal notranslate"><span class="pre">_A</span></code> or <code class="docutils literal notranslate"><span class="pre">_B</span></code> suffix have been deleted.
In the later <a class="reference internal" href="objtrace.html#objtrace"><span class="std std-ref">object tracing</span></a>, the software will connect the object traces
to the reduced files by the filename, so it is important that the filenames
are unique for every traced spectrum.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Run the</strong> <a class="reference internal" href="objtrace.html#man-trace"><span class="std std-ref">manual object tracing</span></a> <strong>routine on all of the copied files</strong>.</dt><dd><p>(Run the regular <a class="reference internal" href="objtrace.html#objtrace"><span class="std std-ref">object tracing</span></a> for the standard star if you are using one - skip
the science files in the regular <a class="reference internal" href="objtrace.html#objtrace"><span class="std std-ref">object tracing</span></a> by pressing <code class="docutils literal notranslate"><span class="pre">q</span></code> at every science spectrum.)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Extract the distinct spectra by running the (important)</strong> <a class="reference internal" href="extract_1d.html#sum"><span class="std std-ref">simple extraction</span></a> <strong>routine on the copied files</strong>.</dt><dd><p>The reason for running the simple extraction is that the simple extraction puts hard box-like boundaries on the extraction
region, which is needed for the closely spaced spectra. The hard boundaries prevent the spectra from ‘’bleeding’’ into another. You might need to be conservative with what FWHM guess you use.
The QA plot from the <a class="reference internal" href="extract_1d.html#sum"><span class="std std-ref">simple extraction</span></a> can be used to asses if the extraction region is correct.</p>
</dd>
</dl>
</li>
<li><p><strong>Flux the spectra by running the</strong> <a class="reference internal" href="calibrate.html#flux-calibrate"><span class="std std-ref">flux calibration</span></a> <strong>routine on the copied files</strong>.</p></li>
<li><p><strong>Lastly</strong> <a class="reference internal" href="combine_spec.html#combine-spec"><span class="std std-ref">combine the fluxed spectra</span></a> <strong>according to the distinct sources</strong>.</p>
<blockquote>
<div><p>For the example above with distinct sources A and B, the relevant part of the <a class="reference internal" href="configuration_file.html#conf"><span class="std std-ref">configuration file</span></a> would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;combine&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;object_A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;exposure_1_A.fits&quot;</span><span class="p">,</span> <span class="s2">&quot;exposure_2_A.fits&quot;</span><span class="p">,</span> <span class="s2">&quot;exposure_3_A.fits&quot;</span><span class="p">],</span>
    <span class="s2">&quot;object_B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;exposure_1_B.fits&quot;</span><span class="p">,</span> <span class="s2">&quot;exposure_2_B.fits&quot;</span><span class="p">,</span> <span class="s2">&quot;exposure_3_B.fits&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">PyLongslit</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure.html">Overview of all pipeline procedures and their products</a></li>
<li class="toctree-l1"><a class="reference internal" href="tested_instruments.html">Tested Instruments and Configurations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Special Use Cases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#extracting-closely-spaced-spectra">Extracting closely spaced spectra</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="develop.html">Interested in developing?</a></li>
<li class="toctree-l1"><a class="reference internal" href="uncertainties.html">Note on how the software estimates uncertainties</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="tested_instruments.html" title="previous chapter">Tested Instruments and Configurations</a></li>
      <li>Next: <a href="develop.html" title="next chapter">Interested in developing?</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/special_use_cases.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>